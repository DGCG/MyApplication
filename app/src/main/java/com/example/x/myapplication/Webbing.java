package com.example.x.myapplication;

import android.provider.DocumentsContract;

import org.jsoup.Jsoup;
import org.jsoup.Connection;
import org.jsoup.nodes.Document;
import org.jsoup.nodes.Element;
import org.jsoup.select.Elements;



public class Webbing {

    public static void Open() throws Exception {

        Connection.Response loginForm = Jsoup.connect("https://sso.unileon.es/PAPI/index.php?ATTREQ=unileonADAS_GPoA&PAPIPOAREF=fce9684731ca1e3c2c490c6b10d257c9&PAPIPOAURL=https%3A%2F%2Fsso.unileon.es%2FPAPI%2Fgpoa.php%3FACTION%3DCHECK%26DATA%3D1487338135388%26URL%3Dhttps%253A%252F%252Funixxi-sso.unileon.es%252Fsso%252Fauth%253Fsite2pstoretoken%253Dv1.2%257E31BEF285%257E7BA049EDEFA41303BB12F0DDA7B01141DA10FF3D712DE337544E530B5A83FAE43A8FEEE491FC6AC2E3D4C71094B4B9AB348E83CCC956A1CD41AD2BD59C78990AC52C3EB57756C429E56EE73443006B734076649D9794EE8D307643EADADA7DEC5A016B75519D602849F1BDD534130759DAA45254553D1DDBA1B83262451DC9F9FF61F189A8A617AC3A03143ACA7B7E8DAFD018EF179066530A2037C4B09DFCAA39318864778E44C196AF3E7754FBAEBAF698EA4F96E48D79FE9B5A97DEC499B9ECA6F506E4821B76E0B1750D5C30BDF325D17BF3CDFCE5CC4F7D303B9089B3B6C12AF06E063FE98B%26site2pstoretoken%3Dv1.2%7E31BEF285%7E7BA049EDEFA41303BB12F0DDA7B01141DA10FF3D712DE337544E530B5A83FAE43A8FEEE491FC6AC2E3D4C71094B4B9AB348E83CCC956A1CD41AD2BD59C78990AC52C3EB57756C429E56EE73443006B734076649D9794EE8D307643EADADA7DEC5A016B75519D602849F1BDD534130759DAA45254553D1DDBA1B83262451DC9F9FF61F189A8A617AC3A03143ACA7B7E8DAFD018EF179066530A2037C4B09DFCAA39318864778E44C196AF3E7754FBAEBAF698EA4F96E48D79FE9B5A97DEC499B9ECA6F506E4821B76E0B1750D5C30BDF325D17BF3CDFCE5CC4F7D303B9089B3B6C12AF06E063FE98B&PAPIOPOA=https%3A%2F%2Funixxi-sso.unileon.es%2Fsso%2Fauth%3Fsite2pstoretoken%3Dv1.2%7E31BEF285%7E7BA049EDEFA41303BB12F0DDA7B01141DA10FF3D712DE337544E530B5A83FAE43A8FEEE491FC6AC2E3D4C71094B4B9AB348E83CCC956A1CD41AD2BD59C78990AC52C3EB57756C429E56EE73443006B734076649D9794EE8D307643EADADA7DEC5A016B75519D602849F1BDD534130759DAA45254553D1DDBA1B83262451DC9F9FF61F189A8A617AC3A03143ACA7B7E8DAFD018EF179066530A2037C4B09DFCAA39318864778E44C196AF3E7754FBAEBAF698EA4F96E48D79FE9B5A97DEC499B9ECA6F506E4821B76E0B1750D5C30BDF325D17BF3CDFCE5CC4F7D303B9089B3B6C12AF06E063FE98B")
                .method(Connection.Method.GET)
                .execute();

        Document document = Jsoup.connect("https://sso.unileon.es/PAPI/index.php?ATTREQ=unileonADAS_GPoA&PAPIPOAREF=fce9684731ca1e3c2c490c6b10d257c9&PAPIPOAURL=https%3A%2F%2Fsso.unileon.es%2FPAPI%2Fgpoa.php%3FACTION%3DCHECK%26DATA%3D1487338135388%26URL%3Dhttps%253A%252F%252Funixxi-sso.unileon.es%252Fsso%252Fauth%253Fsite2pstoretoken%253Dv1.2%257E31BEF285%257E7BA049EDEFA41303BB12F0DDA7B01141DA10FF3D712DE337544E530B5A83FAE43A8FEEE491FC6AC2E3D4C71094B4B9AB348E83CCC956A1CD41AD2BD59C78990AC52C3EB57756C429E56EE73443006B734076649D9794EE8D307643EADADA7DEC5A016B75519D602849F1BDD534130759DAA45254553D1DDBA1B83262451DC9F9FF61F189A8A617AC3A03143ACA7B7E8DAFD018EF179066530A2037C4B09DFCAA39318864778E44C196AF3E7754FBAEBAF698EA4F96E48D79FE9B5A97DEC499B9ECA6F506E4821B76E0B1750D5C30BDF325D17BF3CDFCE5CC4F7D303B9089B3B6C12AF06E063FE98B%26site2pstoretoken%3Dv1.2%7E31BEF285%7E7BA049EDEFA41303BB12F0DDA7B01141DA10FF3D712DE337544E530B5A83FAE43A8FEEE491FC6AC2E3D4C71094B4B9AB348E83CCC956A1CD41AD2BD59C78990AC52C3EB57756C429E56EE73443006B734076649D9794EE8D307643EADADA7DEC5A016B75519D602849F1BDD534130759DAA45254553D1DDBA1B83262451DC9F9FF61F189A8A617AC3A03143ACA7B7E8DAFD018EF179066530A2037C4B09DFCAA39318864778E44C196AF3E7754FBAEBAF698EA4F96E48D79FE9B5A97DEC499B9ECA6F506E4821B76E0B1750D5C30BDF325D17BF3CDFCE5CC4F7D303B9089B3B6C12AF06E063FE98B&PAPIOPOA=https%3A%2F%2Funixxi-sso.unileon.es%2Fsso%2Fauth%3Fsite2pstoretoken%3Dv1.2%7E31BEF285%7E7BA049EDEFA41303BB12F0DDA7B01141DA10FF3D712DE337544E530B5A83FAE43A8FEEE491FC6AC2E3D4C71094B4B9AB348E83CCC956A1CD41AD2BD59C78990AC52C3EB57756C429E56EE73443006B734076649D9794EE8D307643EADADA7DEC5A016B75519D602849F1BDD534130759DAA45254553D1DDBA1B83262451DC9F9FF61F189A8A617AC3A03143ACA7B7E8DAFD018EF179066530A2037C4B09DFCAA39318864778E44C196AF3E7754FBAEBAF698EA4F96E48D79FE9B5A97DEC499B9ECA6F506E4821B76E0B1750D5C30BDF325D17BF3CDFCE5CC4F7D303B9089B3B6C12AF06E063FE98B")
                .data("adAS_usernamee", "dgarcn")
                .data("adAS_password", "uz66extb")
                //.data("agreement", "on")
                .timeout(5000)
                .cookies(loginForm.cookies())
                .post();

        String url = "https://empleado.unileon.es/portal/page/portal/uxxiportal/rrhh/nomina";

        Document fpl = Jsoup.connect(url)
                .timeout(5000)
                .cookies(loginForm.cookies())
                .get();
        String body = fpl.body().toString();
        //ExtFile.write(body);

        Document doc = Jsoup.parse(html);
        Element link = doc.select("a").first();
        String linkHref = link.attr("href"); // "https://empleado.unileon.es/portal/page/portal/592187D5530C5024E04010AC0A1E0175"

    }

}